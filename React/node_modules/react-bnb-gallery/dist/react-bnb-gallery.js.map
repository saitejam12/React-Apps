{"version":3,"file":"react-bnb-gallery.js","sources":["../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/objectSpread.js","../src/constants.js","../src/shapes/SlideDirectionShape.js","../src/shapes/PhotoShape.js","../src/shapes/PhotosShape.js","../src/defaultPhrases.js","../src/utils/getPhrasePropTypes.js","../src/common/galleryPropTypes.js","../src/utils/noop.js","../src/common/galleryDefaultProps.js","../src/common/imagePropTypes.js","../src/common/imageDefaultProps.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../src/components/LoadingSpinner.js","../src/components/Image.js","../src/components/GalleryPhoto.js","../src/components/GalleryThumbnail.js","../src/components/GalleryTogglePhotoList.js","../src/utils/calculateThumbnailsContainerDimension.js","../src/utils/calculateThumbnailsLeftScroll.js","../src/components/GalleryCaption.js","../src/components/GalleryControl.js","../src/components/GalleryPrevButton.js","../src/components/GalleryNextButton.js","../src/components/Gallery.js","../src/components/GalleryCloseButton.js","../src/common/opacityValidation.js","../src/utils/getPhotos.js","../node_modules/style-inject/dist/style-inject.es.js","../src/ReactBnbGallery.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","export const DIRECTION_PREV = 'prev';\r\nexport const DIRECTION_NEXT = 'next';\r\n\r\nexport const POINTER_TYPE_TOUCH = 'touch';\r\nexport const POINTER_TYPE_PEN = 'pen';\r\n\r\nexport const FORWARDS = 'forwards';\r\nexport const BACKWARDS = 'backwards';\r\n\r\nexport const ARROW_LEFT_KEYCODE = 37;\r\nexport const ARROW_RIGHT_KEYCODE = 39;\r\nexport const ESC_KEYCODE = 27;\r\nexport const ENTER_KEYCODE = 13;\r\nexport const SPACE_KEYCODE = 32;\r\n\r\nexport const TOUCHEVENT_COMPAT_WAIT = 500;\r\nexport const SWIPE_THRESHOLD = 40;\r\n\r\nexport const THUMBNAIL_WIDTH = 100;\r\nexport const THUMBNAIL_HEIGHT = 67;\r\nexport const THUMBNAIL_OFFSET = 10;\r\n\r\nexport const DEFAULT_OPACITY = 1;\r\nexport const DEFAULT_COLOR = 'rgba(0,0,0,1)';\r\nexport const NORMAL_COLOR = 'rgba(255,255,255,1)';\r\nexport const INVERSE_COLOR = 'rgba(1,1,1,1)';\r\nexport const DEFAULT_Z_INDEX = 2000;\r\n\r\nexport const defaultPhotoProps = {\r\n  photo: undefined,\r\n  number: undefined,\r\n  caption: undefined,\r\n  subcaption: undefined,\r\n  thumbnail: undefined,\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nimport {\r\n  FORWARDS,\r\n  BACKWARDS,\r\n} from '../constants';\r\n\r\nexport default PropTypes.oneOf([FORWARDS, BACKWARDS]);\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.shape({\r\n  photo: PropTypes.string.isRequired,\r\n  number: PropTypes.number,\r\n  caption: PropTypes.string,\r\n  subcaption: PropTypes.string,\r\n  thumbnail: PropTypes.string,\r\n});\r\n","import PropTypes from 'prop-types';\r\n\r\nimport PhotoShape from './PhotoShape';\r\n\r\nexport default PropTypes.oneOfType([\r\n  PropTypes.arrayOf(PropTypes.string.isRequired),\r\n  PropTypes.arrayOf(PhotoShape),\r\n]);\r\n","const noPhotosProvided = 'No photos to show';\r\nconst showPhotoList = 'Show photo list';\r\nconst hidePhotoList = 'Hide photo list';\r\n\r\nexport default {\r\n  noPhotosProvided,\r\n  showPhotoList,\r\n  hidePhotoList,\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default function defaultPhrases() {\r\n  return Object.keys(defaultPhrases)\r\n    .reduce((phrases, key) => ({\r\n      ...phrases,\r\n      [key]: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.func,\r\n        PropTypes.node,\r\n      ]),\r\n    }), {});\r\n}\r\n","import PropTypes from 'prop-types';\r\n\r\nimport {\r\n  forbidExtraProps,\r\n  nonNegativeInteger,\r\n} from './prop-types';\r\n\r\nimport SlideDirectionShape from '../shapes/SlideDirectionShape';\r\nimport PhotosShape from '../shapes/PhotosShape';\r\n\r\nimport defaultPhrases from '../defaultPhrases';\r\nimport getPhrasePropTypes from '../utils/getPhrasePropTypes';\r\n\r\nexport default forbidExtraProps({\r\n  activePhotoIndex: nonNegativeInteger,\r\n  activePhotoPressed: PropTypes.func,\r\n  direction: SlideDirectionShape,\r\n  nextButtonPressed: PropTypes.func,\r\n  prevButtonPressed: PropTypes.func,\r\n  showThumbnails: PropTypes.bool,\r\n  photos: PhotosShape,\r\n  preloadSize: nonNegativeInteger,\r\n  wrap: PropTypes.bool,\r\n  phrases: PropTypes.shape(getPhrasePropTypes(defaultPhrases)),\r\n  light: PropTypes.bool,\r\n});\r\n","export default () => {};\r\n","import noop from '../utils/noop';\r\nimport defaultPhrases from '../defaultPhrases';\r\n\r\nimport { FORWARDS } from '../constants';\r\n\r\nexport default {\r\n  activePhotoIndex: 0,\r\n  activePhotoPressed: noop,\r\n  direction: FORWARDS,\r\n  nextButtonPressed: noop,\r\n  prevButtonPressed: noop,\r\n  showThumbnails: true,\r\n  photos: [],\r\n  preloadSize: 5,\r\n  wrap: false,\r\n  phrases: defaultPhrases,\r\n  light: false,\r\n};\r\n","import PropTypes from 'prop-types';\r\n\r\nimport { forbidExtraProps } from './prop-types';\r\n\r\nexport default forbidExtraProps({\r\n  onLoad: PropTypes.func,\r\n  onError: PropTypes.func,\r\n});\r\n","import noop from '../utils/noop';\r\n\r\nexport default {\r\n  onLoad: noop,\r\n  onError: noop,\r\n};\r\n","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  show: PropTypes.bool,\r\n});\r\n\r\nconst defaultProps = {\r\n  show: true,\r\n};\r\n\r\nconst LoadingSpinner = ({ show }) => (show && (\r\n  <div className=\"loading-spinner\" />\r\n));\r\n\r\nLoadingSpinner.propTypes = propTypes;\r\nLoadingSpinner.defaultProps = defaultProps;\r\n\r\nexport default LoadingSpinner;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classnames from 'classnames';\r\n\r\nimport LoadingSpinner from './LoadingSpinner';\r\n\r\nimport {\r\n  imagePropTypes,\r\n  imageDefaultProps,\r\n} from '../common';\r\nimport { forbidExtraProps } from '../common/prop-types';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  ...imagePropTypes,\r\n  alt: PropTypes.string.isRequired,\r\n  src: PropTypes.string.isRequired,\r\n  style: PropTypes.object,\r\n  className: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.array,\r\n  ]),\r\n});\r\n\r\nconst defaultProps = {\r\n  ...imageDefaultProps,\r\n  style: null,\r\n  className: null,\r\n  alt: '',\r\n};\r\n\r\nclass Image extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      withError: false,\r\n    };\r\n    this.onLoad = this.onLoad.bind(this);\r\n    this.onError = this.onError.bind(this);\r\n  }\r\n\r\n  onLoad() {\r\n    const { onLoad } = this.props;\r\n    // wait a litle to show the final picture\r\n    setTimeout(() => {\r\n      onLoad();\r\n      this.setState({\r\n        loading: false,\r\n        withError: false,\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  onError() {\r\n    const { onError } = this.props;\r\n    onError();\r\n    this.setState({\r\n      loading: false,\r\n      withError: true,\r\n    });\r\n  }\r\n\r\n  renderImage() {\r\n    const {\r\n      alt,\r\n      src,\r\n      style,\r\n      className,\r\n    } = this.props;\r\n\r\n    const {\r\n      loading,\r\n      withError,\r\n    } = this.state;\r\n\r\n    const classNames = [\r\n      className,\r\n      'media-image',\r\n    ];\r\n\r\n    let components = [];\r\n\r\n    // the loading spinner\r\n    // TODO: make this 'LoadingSpinner' component customizable\r\n    if (loading) {\r\n      components.push(\r\n        <LoadingSpinner key=\".pictureLoadingSpinner\" />\r\n      );\r\n    }\r\n\r\n    // if no loading, then return the\r\n    // picture only if no error ocurred\r\n    if (!withError) {\r\n      components.push(\r\n        <img\r\n          alt={alt}\r\n          key=\".pictureComponent\"\r\n          className={classnames(classNames)}\r\n          onLoad={this.onLoad}\r\n          onError={this.onError}\r\n          src={src}\r\n          style={style}\r\n        />\r\n      );\r\n    }\r\n\r\n    // TODO: show a custom message indicating the\r\n    // error ocurred while loading the picture\r\n\r\n    return components;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      loading,\r\n    } = this.state;\r\n\r\n    const wrapperClassNames = [\r\n      'picture',\r\n      loading && 'loading',\r\n    ];\r\n\r\n    // render the picture element\r\n    const picture = this.renderImage();\r\n\r\n    return (\r\n      <div className={classnames(wrapperClassNames)}>\r\n        {picture}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nImage.propTypes = propTypes;\r\nImage.defaultProps = defaultProps;\r\n\r\nexport default Image;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport omit from 'lodash/omit';\r\nimport classnames from 'classnames';\r\n\r\nimport Image from './Image';\r\nimport PhotoShape from '../shapes/PhotoShape';\r\n\r\nimport {\r\n  imagePropTypes,\r\n  imageDefaultProps,\r\n} from '../common';\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  ...imagePropTypes,\r\n  photo: PhotoShape,\r\n  onPress: PropTypes.func,\r\n});\r\n\r\nconst defaultProps = {\r\n  ...imageDefaultProps,\r\n  photo: null,\r\n  onPress: noop,\r\n};\r\n\r\nclass GalleryPhoto extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onPress = this.onPress.bind(this);\r\n  }\r\n\r\n  onPress() {\r\n    const { onPress } = this.props;\r\n    onPress();\r\n  }\r\n\r\n  renderPhoto() {\r\n    const {\r\n      photo,\r\n      ...rest\r\n    } = this.props;\r\n\r\n    if (!photo) {\r\n      return null;\r\n    }\r\n\r\n    const imageProps = omit(rest, [\r\n      'onPress',\r\n    ]);\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        onClick={this.onPress}\r\n        className=\"photo-button\"\r\n      >\r\n        <Image\r\n          alt={photo.caption || ''}\r\n          className=\"photo\"\r\n          src={photo.photo}\r\n          {...imageProps}\r\n        />\r\n      </button>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const className = classnames(\r\n      'gallery-media-photo',\r\n      'gallery-media-photo--block',\r\n      'gallery-media-cover',\r\n    );\r\n\r\n    const photoRendered = this.renderPhoto();\r\n\r\n    return (\r\n      <ul className=\"gallery-images--ul\">\r\n        <li className={className}>\r\n          {photoRendered}\r\n        </li>\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nGalleryPhoto.propTypes = propTypes;\r\nGalleryPhoto.defaultProps = defaultProps;\r\n\r\nexport default GalleryPhoto;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classnames from 'classnames';\r\n\r\nimport Image from './Image';\r\nimport PhotoShape from '../shapes/PhotoShape';\r\n\r\nimport {\r\n  forbidExtraProps,\r\n  nonNegativeInteger,\r\n} from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nimport {\r\n  THUMBNAIL_WIDTH,\r\n  THUMBNAIL_HEIGHT,\r\n} from '../constants';\r\n\r\nconst thumbnailStyle = {\r\n  width: THUMBNAIL_WIDTH,\r\n  height: THUMBNAIL_HEIGHT,\r\n};\r\n\r\nconst propTypes = forbidExtraProps({\r\n  active: PropTypes.bool,\r\n  photo: PhotoShape,\r\n  onPress: PropTypes.func,\r\n  number: nonNegativeInteger,\r\n});\r\n\r\nconst defaultProps = {\r\n  active: false,\r\n  photo: null,\r\n  onPress: noop,\r\n  number: 0,\r\n};\r\n\r\nclass GalleryThumbnail extends PureComponent {\r\n  render() {\r\n    const {\r\n      active,\r\n      photo,\r\n      onPress,\r\n      number,\r\n    } = this.props;\r\n\r\n    const className = classnames(\r\n      'thumbnail-button',\r\n      active && 'active',\r\n    );\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        aria-label={photo.caption}\r\n        className={className}\r\n        data-photo-index={number}\r\n        onClick={onPress}\r\n        disabled={false}\r\n      >\r\n        <Image\r\n          alt={photo.caption}\r\n          src={photo.thumbnail || photo.photo}\r\n          className=\"thumbnail\"\r\n          style={thumbnailStyle}\r\n        />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nGalleryThumbnail.propTypes = propTypes;\r\nGalleryThumbnail.defaultProps = defaultProps;\r\n\r\nexport default GalleryThumbnail;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classnames from 'classnames';\r\n\r\nimport defaultPhrases from '../defaultPhrases';\r\nimport getPhrasePropTypes from '../utils/getPhrasePropTypes';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  isOpened: PropTypes.bool,\r\n  onPress: PropTypes.func,\r\n  phrases: PropTypes.shape(getPhrasePropTypes(defaultPhrases)),\r\n});\r\n\r\nconst defaultProps = {\r\n  isOpened: true,\r\n  onPress: noop,\r\n  phrases: defaultPhrases,\r\n};\r\n\r\nclass GalleryTogglePhotoList extends PureComponent {\r\n  render() {\r\n    const {\r\n      isOpened,\r\n      onPress,\r\n      phrases: {\r\n        showPhotoList: showLabel,\r\n        hidePhotoList: hideLabel,\r\n      },\r\n    } = this.props;\r\n\r\n    const label = isOpened ? hideLabel : showLabel;\r\n\r\n    const className = classnames(\r\n      'gallery-thumbnails--toggle',\r\n      isOpened ? 'hide' : 'open',\r\n    );\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={className}\r\n        onClick={onPress}\r\n      >\r\n        {label}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nGalleryTogglePhotoList.propTypes = propTypes;\r\nGalleryTogglePhotoList.defaultProps = defaultProps;\r\n\r\nexport default GalleryTogglePhotoList;\r\n","import {\r\n  THUMBNAIL_WIDTH,\r\n  THUMBNAIL_OFFSET,\r\n} from '../constants';\r\n\r\nexport default function calculateThumbnailsContainerDimension(total) {\r\n  return (THUMBNAIL_WIDTH * total) + ((THUMBNAIL_OFFSET * total) - THUMBNAIL_OFFSET);\r\n}\r\n","import calculateThumbnailsContainerDimension from './calculateThumbnailsContainerDimension';\r\n\r\nimport {\r\n  THUMBNAIL_WIDTH,\r\n  THUMBNAIL_OFFSET,\r\n} from '../constants';\r\n\r\nexport default function calculateThumbnailsLeftScroll(current, total, bounding) {\r\n  const half = (bounding.width / 2) - (THUMBNAIL_WIDTH / 2);\r\n  const thumbnailsOffset = ((current * THUMBNAIL_WIDTH) + (current * THUMBNAIL_OFFSET)) - half;\r\n  let calculatedScrollLeft = 0;\r\n\r\n  if (thumbnailsOffset < 0) {\r\n    return calculatedScrollLeft;\r\n  }\r\n\r\n  const thumbnailsPerRow = bounding.width / (THUMBNAIL_WIDTH + THUMBNAIL_OFFSET);\r\n  const thumbnailsHalf = Math.round(thumbnailsPerRow / 2);\r\n  const thumbnailsLeft = total - (current + 1);\r\n\r\n  if (thumbnailsLeft < thumbnailsHalf) {\r\n    calculatedScrollLeft = calculateThumbnailsContainerDimension(total) - bounding.width;\r\n  }\r\n  else {\r\n    calculatedScrollLeft = thumbnailsOffset;\r\n  }\r\n\r\n  return -Math.abs(calculatedScrollLeft);\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classnames from 'classnames';\r\nimport noop from '../utils/noop';\r\n\r\nimport GalleryThumbnail from './GalleryThumbnail';\r\nimport GalleryTogglePhotoList from './GalleryTogglePhotoList';\r\n\r\nimport calculateThumbnailsContainerDimension from '../utils/calculateThumbnailsContainerDimension';\r\nimport calculateThumbnailsLeftScroll from '../utils/calculateThumbnailsLeftScroll';\r\n\r\nimport defaultPhrases from '../defaultPhrases';\r\nimport getPhrasePropTypes from '../utils/getPhrasePropTypes';\r\n\r\nimport {\r\n  forbidExtraProps,\r\n  nonNegativeInteger,\r\n} from '../common/prop-types';\r\n\r\nimport PhotosShape from '../shapes/PhotosShape';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  showThumbnails: PropTypes.bool,\r\n  current: nonNegativeInteger,\r\n  photos: PhotosShape,\r\n  onPress: PropTypes.func,\r\n  phrases: PropTypes.shape(getPhrasePropTypes(defaultPhrases)),\r\n});\r\n\r\nconst defaultProps = {\r\n  showThumbnails: true,\r\n  current: 0,\r\n  photos: [],\r\n  onPress: noop,\r\n  phrases: defaultPhrases,\r\n};\r\n\r\nclass GalleryCaption extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      showThumbnails,\r\n      photos,\r\n    } = this.props;\r\n\r\n    this.state = {\r\n      showThumbnails,\r\n    };\r\n\r\n    this.thumbnailsWrapperRef = null;\r\n    this.thumbnailsListRef = null;\r\n    this.hasMoreThanOnePhoto = photos.length > 1;\r\n    this.onThumbnailPress = this.onThumbnailPress.bind(this);\r\n    this.setGalleryFigcaptionRef = this.setGalleryFigcaptionRef.bind(this);\r\n    this.setGalleryThubmanilsRef = this.setGalleryThubmanilsRef.bind(this);\r\n    this.toggleThumbnails = this.toggleThumbnails.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { current } = this.props;\r\n    if (current !== prevProps.current) {\r\n      this.setThumbnailsWrapperScrollLeft(current);\r\n    }\r\n  }\r\n\r\n  onThumbnailPress(event) {\r\n    const {\r\n      onPress,\r\n      photos,\r\n    } = this.props;\r\n    const index = parseInt(event.currentTarget.dataset.photoIndex, 10);\r\n    if (index >= 0 && index <= photos.length - 1) {\r\n      onPress(index);\r\n    }\r\n  }\r\n\r\n  setThumbnailsWrapperScrollLeft(current) {\r\n    const { photos } = this.props;\r\n    const bounding = this.thumbnailsWrapperRef.getBoundingClientRect();\r\n    const scrollLeft = calculateThumbnailsLeftScroll(current, photos.length, bounding);\r\n    this.thumbnailsListRef.style.marginLeft = `${scrollLeft}px`;\r\n  }\r\n\r\n  getPhotoByIndex(index) {\r\n    const { photos } = this.props;\r\n    return photos[index];\r\n  }\r\n\r\n  setGalleryFigcaptionRef(element) {\r\n    this.thumbnailsWrapperRef = element;\r\n  }\r\n\r\n  setGalleryThubmanilsRef(element) {\r\n    this.thumbnailsListRef = element;\r\n  }\r\n\r\n  toggleThumbnails() {\r\n    this.setState(prevState => ({\r\n      showThumbnails: !prevState.showThumbnails,\r\n    }));\r\n  }\r\n\r\n  renderThumbnail(photo, index, onPress) {\r\n    const { current } = this.props;\r\n\r\n    return (\r\n      <GalleryThumbnail\r\n        active={index === current}\r\n        photo={photo}\r\n        onPress={onPress}\r\n        number={index}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      current,\r\n      photos,\r\n      phrases,\r\n    } = this.props;\r\n\r\n    const {\r\n      showThumbnails,\r\n    } = this.state;\r\n\r\n    const className = classnames(\r\n      'gallery-figcaption',\r\n      !showThumbnails && 'hide',\r\n    );\r\n\r\n    const currentPhoto = this.getPhotoByIndex(current);\r\n    const captionThumbnailsWrapperWidth = calculateThumbnailsContainerDimension(photos.length);\r\n\r\n    return (\r\n      <figcaption className={className}>\r\n        <div className=\"gallery-figcaption--content\">\r\n          <div className=\"gallery-figcaption--inner\">\r\n            <div className=\"gallery-figcaption--info\">\r\n              <div className=\"caption-left\">\r\n                {currentPhoto.caption && (\r\n                  <h3 className=\"photo-caption\">\r\n                    {currentPhoto.caption}\r\n                  </h3>\r\n                )}\r\n                {currentPhoto.subcaption && (\r\n                  <p className=\"photo-subcaption\">\r\n                    {currentPhoto.subcaption}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              {this.hasMoreThanOnePhoto && (\r\n                <div className=\"caption-right\">\r\n                  <GalleryTogglePhotoList\r\n                    phrases={phrases}\r\n                    isOpened={showThumbnails}\r\n                    onPress={this.toggleThumbnails}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            {this.hasMoreThanOnePhoto && (\r\n              <div\r\n                className=\"gallery-figcaption--thumbnails\"\r\n                aria-hidden={false}\r\n                ref={this.setGalleryFigcaptionRef}\r\n              >\r\n                <div\r\n                  className=\"caption-thumbnails\"\r\n                  style={{ width: captionThumbnailsWrapperWidth }}\r\n                >\r\n                  <ul\r\n                    className=\"thumbnails-list\"\r\n                    ref={this.setGalleryThubmanilsRef}\r\n                  >\r\n                    {photos.map((photo, index) => (\r\n                      <li key={photo.photo}>\r\n                        {this.renderThumbnail(photo, index, this.onThumbnailPress)}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </figcaption>\r\n    );\r\n  }\r\n}\r\n\r\nGalleryCaption.propTypes = propTypes;\r\nGalleryCaption.defaultProps = defaultProps;\r\n\r\nexport default GalleryCaption;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classnames from 'classnames';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nimport {\r\n  NORMAL_COLOR,\r\n  INVERSE_COLOR,\r\n} from '../constants';\r\n\r\nconst svgAttributes = {\r\n  viewBox: '0 0 18 18',\r\n  role: 'presentation',\r\n  focusable: false,\r\n  'aria-hidden': true,\r\n};\r\n\r\nconst controlStyle = {\r\n  height: '2.8em',\r\n  width: '2.8em',\r\n  fill: NORMAL_COLOR,\r\n};\r\n\r\nconst controlStyleLight = {\r\n  fill: INVERSE_COLOR,\r\n};\r\n\r\nconst propTypes = forbidExtraProps({\r\n  arrow: PropTypes.string,\r\n  onPress: PropTypes.func,\r\n  label: PropTypes.string,\r\n  className: PropTypes.string,\r\n  disabled: PropTypes.bool,\r\n  light: PropTypes.bool,\r\n});\r\n\r\nconst defaultProps = {\r\n  arrow: null,\r\n  onPress: noop,\r\n  label: '',\r\n  className: null,\r\n  disabled: false,\r\n  light: false,\r\n};\r\n\r\nclass GalleryControl extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onButtonPress = this.onButtonPress.bind(this);\r\n  }\r\n\r\n  onButtonPress() {\r\n    const { onPress } = this.props;\r\n    onPress();\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      arrow,\r\n      label,\r\n      className,\r\n      disabled,\r\n      light,\r\n    } = this.props;\r\n\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={classnames('gallery-control', className)}\r\n        onClick={this.onButtonPress}\r\n        disabled={disabled}\r\n        aria-label={label}\r\n      >\r\n        <svg\r\n          {...svgAttributes}\r\n          style={{\r\n            ...controlStyle,\r\n            ...(light && controlStyleLight),\r\n          }}\r\n        >\r\n          <path\r\n            d={arrow}\r\n            fillRule=\"evenodd\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nGalleryControl.propTypes = propTypes;\r\nGalleryControl.defaultProps = defaultProps;\r\n\r\nexport default GalleryControl;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport GalleryControl from './GalleryControl';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nconst PREV_ARROW = 'm13.7 16.29a1 1 0 1 1 -1.42 1.41l-8-8a1 1 0 0 1 0-1.41l8-8a1 1 0 1 1 1.42 1.41l-7.29 7.29z';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  onPress: PropTypes.func,\r\n  disabled: PropTypes.bool,\r\n  light: PropTypes.bool,\r\n});\r\n\r\nconst defaultProps = {\r\n  onPress: noop,\r\n  disabled: false,\r\n  light: false,\r\n};\r\n\r\nclass GalleryPrevButton extends PureComponent {\r\n  render() {\r\n    const {\r\n      onPress,\r\n      disabled,\r\n      light,\r\n    } = this.props;\r\n\r\n    return (\r\n      <GalleryControl\r\n        className=\"gallery-control--prev\"\r\n        onPress={onPress}\r\n        arrow={PREV_ARROW}\r\n        disabled={disabled}\r\n        light={light}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nGalleryPrevButton.propTypes = propTypes;\r\nGalleryPrevButton.defaultProps = defaultProps;\r\n\r\nexport default GalleryPrevButton;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport GalleryControl from './GalleryControl';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nconst NEXT_ARROW = 'm4.29 1.71a1 1 0 1 1 1.42-1.41l8 8a1 1 0 0 1 0 1.41l-8 8a1 1 0 1 1 -1.42-1.41l7.29-7.29z';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  onPress: PropTypes.func,\r\n  disabled: PropTypes.bool,\r\n  light: PropTypes.bool,\r\n});\r\n\r\nconst defaultProps = {\r\n  onPress: noop,\r\n  disabled: false,\r\n  light: false,\r\n};\r\n\r\nclass GalleryNextButton extends PureComponent {\r\n  render() {\r\n    const {\r\n      onPress,\r\n      disabled,\r\n      light,\r\n    } = this.props;\r\n\r\n    return (\r\n      <GalleryControl\r\n        className=\"gallery-control--next\"\r\n        onPress={onPress}\r\n        arrow={NEXT_ARROW}\r\n        disabled={disabled}\r\n        light={light}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nGalleryNextButton.propTypes = propTypes;\r\nGalleryNextButton.defaultProps = defaultProps;\r\n\r\nexport default GalleryNextButton;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport {\r\n  galleryPropTypes,\r\n  galleryDefaultProps,\r\n} from '../common';\r\n\r\nimport GalleryPhoto from './GalleryPhoto';\r\nimport GalleryCaption from './GalleryCaption';\r\nimport GalleryPrevButton from './GalleryPrevButton';\r\nimport GalleryNextButton from './GalleryNextButton';\r\n\r\nimport {\r\n  DIRECTION_NEXT,\r\n  DIRECTION_PREV,\r\n} from '../constants';\r\n\r\nconst propTypes = {\r\n  ...galleryPropTypes,\r\n};\r\n\r\nconst defaultProps = {\r\n  ...galleryDefaultProps,\r\n};\r\n\r\nclass Gallery extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      activePhotoIndex,\r\n      photos,\r\n      wrap,\r\n    } = this.props;\r\n    this.state = {\r\n      activePhotoIndex,\r\n      hidePrevButton: wrap && activePhotoIndex === 0,\r\n      hideNextButton: wrap && activePhotoIndex === photos.length - 1,\r\n      controlsDisabled: true,\r\n    };\r\n    this.lastPreloadIndex = 0;\r\n    this.preloadedPhotos = [];\r\n    this.hasPhotos = photos.length > 0;\r\n    this.hasMoreThanOnePhoto = photos.length > 1;\r\n    this.move = this.move.bind(this);\r\n    this.prev = this.prev.bind(this);\r\n    this.next = this.next.bind(this);\r\n    this.onPhotoLoad = this.onPhotoLoad.bind(this);\r\n    this.onPhotoError = this.onPhotoError.bind(this);\r\n    this.onPhotoPress = this.onPhotoPress.bind(this);\r\n    this.onThumbnailPress = this.onThumbnailPress.bind(this);\r\n    this.onPrevButtonPress = this.onPrevButtonPress.bind(this);\r\n    this.onNextButtonPress = this.onNextButtonPress.bind(this);\r\n  }\r\n\r\n  onNextButtonPress() {\r\n    const { nextButtonPressed } = this.props;\r\n    this.next();\r\n    nextButtonPressed();\r\n  }\r\n\r\n  onPrevButtonPress() {\r\n    const { prevButtonPressed } = this.props;\r\n    this.prev();\r\n    prevButtonPressed();\r\n  }\r\n\r\n  onPhotoLoad() {\r\n    return this.setState({ controlsDisabled: false });\r\n  }\r\n\r\n  onPhotoError() {\r\n    return this.setState({ controlsDisabled: false });\r\n  }\r\n\r\n  onPhotoPress() {\r\n    const { activePhotoPressed } = this.props;\r\n    this.move(DIRECTION_NEXT);\r\n    activePhotoPressed();\r\n  }\r\n\r\n  onThumbnailPress(index) {\r\n    this.to(index);\r\n  }\r\n\r\n  getPhotoByIndex(index) {\r\n    const { photos } = this.props;\r\n    return photos[index];\r\n  }\r\n\r\n  getItemByDirection(direction, activeIndex) {\r\n    const { photos, wrap } = this.props;\r\n\r\n    const isNextDirection = direction === DIRECTION_NEXT;\r\n    const isPrevDirection = direction === DIRECTION_PREV;\r\n\r\n    const lastItemIndex = photos.length - 1;\r\n    const isGoingToWrap = (isPrevDirection && activeIndex === 0)\r\n      || (isNextDirection && activeIndex === lastItemIndex);\r\n\r\n    if (isGoingToWrap && wrap) {\r\n      return activeIndex;\r\n    }\r\n\r\n    const delta = isPrevDirection ? -1 : 1;\r\n    const itemIndex = (activeIndex + delta) % photos.length;\r\n    return itemIndex === -1 ? photos.length - 1 : itemIndex;\r\n  }\r\n\r\n  to(index) {\r\n    const { photos } = this.props;\r\n    const { activePhotoIndex } = this.state;\r\n\r\n    if ((index > photos.length - 1 || index < 0) || activePhotoIndex === index) {\r\n      return; // nothing to do\r\n    }\r\n\r\n    const direction = index > activePhotoIndex ? DIRECTION_NEXT : DIRECTION_PREV;\r\n\r\n    this.move(direction, index);\r\n  }\r\n\r\n  move(direction, index = false) {\r\n    const { activePhotoIndex } = this.state;\r\n\r\n    const nextElementIndex = index !== false\r\n      ? index\r\n      : this.getItemByDirection(direction, activePhotoIndex);\r\n\r\n    this.wrapCheck(direction, nextElementIndex);\r\n\r\n    this.setState({\r\n      activePhotoIndex: nextElementIndex,\r\n    });\r\n  }\r\n\r\n  next() {\r\n    return this.move(DIRECTION_NEXT);\r\n  }\r\n\r\n  prev() {\r\n    return this.move(DIRECTION_PREV);\r\n  }\r\n\r\n  wrapCheck(direction, nextElementIndex) {\r\n    const {\r\n      photos,\r\n      wrap,\r\n    } = this.props;\r\n\r\n    if (wrap) {\r\n      this.setState({\r\n        hideNextButton: nextElementIndex === photos.length - 1,\r\n        hidePrevButton: nextElementIndex === 0,\r\n      });\r\n    }\r\n  }\r\n\r\n  renderControls() {\r\n    const {\r\n      light,\r\n    } = this.props;\r\n\r\n    const {\r\n      hidePrevButton,\r\n      hideNextButton,\r\n      controlsDisabled,\r\n    } = this.state;\r\n\r\n    const controls = [];\r\n\r\n    if (this.hasMoreThanOnePhoto) {\r\n      // previous control\r\n      if (!hidePrevButton) {\r\n        controls.push((\r\n          <GalleryPrevButton\r\n            key=\".prevControl\"\r\n            disabled={controlsDisabled}\r\n            onPress={this.onPrevButtonPress}\r\n            light={light}\r\n          />\r\n        ));\r\n      }\r\n\r\n      // next control\r\n      if (!hideNextButton) {\r\n        controls.push((\r\n          <GalleryNextButton\r\n            key=\".nextControl\"\r\n            disabled={controlsDisabled}\r\n            onPress={this.onNextButtonPress}\r\n            light={light}\r\n          />\r\n        ));\r\n      }\r\n    }\r\n\r\n    return controls;\r\n  }\r\n\r\n  renderPreloadPhotos() {\r\n    const { photos } = this.props;\r\n\r\n    return photos.map(photo => (\r\n      <img\r\n        key={photo.photo}\r\n        alt={photo.photo}\r\n        src={photo.photo}\r\n      />\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      photos,\r\n      showThumbnails,\r\n      phrases,\r\n    } = this.props;\r\n\r\n    const {\r\n      noPhotosProvided: emptyMessage,\r\n    } = phrases;\r\n\r\n    const {\r\n      activePhotoIndex,\r\n    } = this.state;\r\n\r\n    // preload photos\r\n    const galleryModalPreloadPhotos = this.renderPreloadPhotos();\r\n\r\n    const controls = this.renderControls();\r\n\r\n    const current = this.getPhotoByIndex(activePhotoIndex);\r\n\r\n    return (\r\n      <div className=\"gallery\">\r\n        <div className=\"gallery-modal--preload\">\r\n          {galleryModalPreloadPhotos}\r\n        </div>\r\n        <div className=\"gallery-main\">\r\n          {controls}\r\n          <div className=\"gallery-photos\">\r\n            {this.hasPhotos ? (\r\n              <div className=\"gallery-photo\">\r\n                <div className=\"gallery-photo--current\">\r\n                  <GalleryPhoto\r\n                    photo={current}\r\n                    onLoad={this.onPhotoLoad}\r\n                    onError={this.onPhotoError}\r\n                    onPress={this.onPhotoPress}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"gallery-empty\">\r\n                {emptyMessage}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {showThumbnails && current && (\r\n          <GalleryCaption\r\n            phrases={phrases}\r\n            current={activePhotoIndex}\r\n            photos={photos}\r\n            onPress={this.onThumbnailPress}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGallery.propTypes = propTypes;\r\nGallery.defaultProps = defaultProps;\r\n\r\nexport default Gallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { forbidExtraProps } from '../common/prop-types';\r\nimport noop from '../utils/noop';\r\n\r\nimport {\r\n  NORMAL_COLOR,\r\n  INVERSE_COLOR,\r\n} from '../constants';\r\n\r\nconst CLOSE_PATH = 'm23.25 24c-.19 0-.38-.07-.53-.22l-10.72-10.72-10.72 10.72c-.29.29-.77.29-1.06 0s-.29-.77 0-1.06l10.72-10.72-10.72-10.72c-.29-.29-.29-.77 0-1.06s.77-.29 1.06 0l10.72 10.72 10.72-10.72c.29-.29.77-.29 1.06 0s .29.77 0 1.06l-10.72 10.72 10.72 10.72c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22';\r\n\r\nconst buttonStyle = {\r\n  height: '2em',\r\n  width: '2em',\r\n  display: 'block',\r\n  fill: NORMAL_COLOR,\r\n};\r\n\r\nconst buttonStyleLight = {\r\n  fill: INVERSE_COLOR,\r\n};\r\n\r\nconst buttonProps = {\r\n  viewBox: '0 0 24 24',\r\n  role: 'img',\r\n  focusable: false,\r\n};\r\n\r\nconst propTypes = forbidExtraProps({\r\n  onPress: PropTypes.func,\r\n  light: PropTypes.bool,\r\n});\r\n\r\nconst defaultProps = {\r\n  onPress: noop,\r\n  light: false,\r\n};\r\n\r\nconst GalleryCloseButton = ({\r\n  onPress,\r\n  light,\r\n}) => (\r\n  <button\r\n    onClick={onPress}\r\n    className=\"gallery-close\"\r\n    type=\"button\"\r\n    aria-busy={false}\r\n  >\r\n    <svg\r\n      {...buttonProps}\r\n      style={{\r\n        ...buttonStyle,\r\n        ...(light && buttonStyleLight),\r\n      }}\r\n    >\r\n      <path d={CLOSE_PATH} fillRule=\"evenodd\" />\r\n    </svg>\r\n  </button>\r\n);\r\n\r\nGalleryCloseButton.propTypes = propTypes;\r\nGalleryCloseButton.defaultProps = defaultProps;\r\n\r\nexport default GalleryCloseButton;\r\n","const MIN = 0;\r\n\r\nconst MAX = 1;\r\n\r\n// eslint-disable-next-line consistent-return\r\nexport default function opacityValidation(props, propName) {\r\n  if (props[propName] < MIN || props[propName] > MAX) {\r\n    return new Error('Invalid value for opacity');\r\n  }\r\n}\r\n","import { defaultPhotoProps } from '../constants';\r\n\r\nexport function processPhoto(photo, index) {\r\n  return Object.assign({}, defaultPhotoProps, typeof photo === 'string'\r\n    ? { number: (index + 1), photo }\r\n    : { ...photo, number: (index + 1) });\r\n}\r\n\r\nexport default function getPhotos(photos) {\r\n  return photos.map(processPhoto);\r\n}\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FocusTrap from 'focus-trap-react';\r\nimport { Portal } from 'react-portal';\r\n\r\nimport omit from 'lodash/omit';\r\nimport classnames from 'classnames';\r\n\r\nimport Gallery from './components/Gallery';\r\nimport GalleryCloseButton from './components/GalleryCloseButton';\r\n\r\nimport opacityValidation from './common/opacityValidation';\r\nimport noop from './utils/noop';\r\nimport getPhotos from './utils/getPhotos';\r\n\r\nimport {\r\n  ARROW_LEFT_KEYCODE,\r\n  ARROW_RIGHT_KEYCODE,\r\n  ESC_KEYCODE,\r\n  DEFAULT_OPACITY,\r\n  DEFAULT_COLOR,\r\n  DEFAULT_Z_INDEX,\r\n} from './constants';\r\n\r\nimport {\r\n  galleryPropTypes,\r\n  galleryDefaultProps,\r\n} from './common';\r\n\r\nimport {\r\n  forbidExtraProps,\r\n  nonNegativeInteger,\r\n} from './common/prop-types';\r\n\r\nimport './styles.css';\r\n\r\nconst propTypes = forbidExtraProps({\r\n  ...galleryPropTypes,\r\n  leftKeyPressed: PropTypes.func,\r\n  onClose: PropTypes.func,\r\n  rightKeyPressed: PropTypes.func,\r\n  show: PropTypes.bool,\r\n  keyboard: PropTypes.bool,\r\n  opacity: opacityValidation,\r\n  backgroundColor: PropTypes.string,\r\n  zIndex: nonNegativeInteger,\r\n});\r\n\r\nconst defaultProps = {\r\n  ...galleryDefaultProps,\r\n  leftKeyPressed: noop,\r\n  onClose: noop,\r\n  rightKeyPressed: noop,\r\n  show: false,\r\n  keyboard: true,\r\n  opacity: DEFAULT_OPACITY,\r\n  backgroundColor: DEFAULT_COLOR,\r\n  zIndex: DEFAULT_Z_INDEX,\r\n};\r\n\r\nclass ReactBnbGallery extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { photos } = this.props;\r\n    this.state = {\r\n      photos: null,\r\n    };\r\n    this.gallery = React.createRef();\r\n    this.close = this.close.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.photos !== state.photos) {\r\n      return {\r\n        photos: getPhotos(props.photos),\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  onKeyDown(event) {\r\n    if (/input|textarea/i.test(event.target.tagName)) {\r\n      return;\r\n    }\r\n\r\n    switch (event.which) {\r\n      case ESC_KEYCODE:\r\n        event.preventDefault();\r\n        this.close();\r\n        break;\r\n\r\n      case ARROW_LEFT_KEYCODE:\r\n        event.preventDefault();\r\n        this.gallery.current.prev();\r\n        break;\r\n\r\n      case ARROW_RIGHT_KEYCODE:\r\n        event.preventDefault();\r\n        this.gallery.current.next();\r\n        break;\r\n\r\n      default:\r\n    }\r\n  }\r\n\r\n  getModalOverlayStyles() {\r\n    const {\r\n      opacity,\r\n      backgroundColor,\r\n    } = this.props;\r\n\r\n    return {\r\n      opacity,\r\n      backgroundColor,\r\n    };\r\n  }\r\n\r\n  close() {\r\n    const { onClose } = this.props;\r\n    onClose();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      show,\r\n      phrases,\r\n      keyboard,\r\n      light,\r\n      // abstract the user to use 'zIndex' instead of 'zindex'\r\n      zIndex: zindex,\r\n    } = this.props;\r\n\r\n    const { photos } = this.state;\r\n\r\n    if (!show) {\r\n      return null; // nothing to return\r\n    }\r\n\r\n    const galleryProps = omit(this.props, [\r\n      'onClose',\r\n      'leftKeyPressed',\r\n      'rightKeyPressed',\r\n      'show',\r\n      'photos',\r\n      'opacity',\r\n      'backgroundColor',\r\n      'zIndex',\r\n      'keyboard',\r\n    ]);\r\n\r\n    const modalProps = {\r\n      className: classnames([\r\n        'gallery-modal',\r\n        light && 'mode-light',\r\n      ]),\r\n      role: 'dialog',\r\n      tabIndex: -1,\r\n      onKeyDown: keyboard && this.onKeyDown,\r\n      zindex,\r\n    };\r\n\r\n    // modal overlay customization styles\r\n    const galleryModalOverlayStyles = this.getModalOverlayStyles();\r\n\r\n    return (\r\n      <Portal>\r\n        <FocusTrap>\r\n          <div {...modalProps}>\r\n            <div\r\n              style={galleryModalOverlayStyles}\r\n              className=\"gallery-modal--overlay\"\r\n            />\r\n            <div className=\"gallery-modal--container\">\r\n              <div className=\"gallery-modal--table\">\r\n                <div className=\"gallery-modal--cell\">\r\n                  <div className=\"gallery-modal--content\">\r\n                    <div className=\"gallery-modal--close\">\r\n                      <GalleryCloseButton\r\n                        onPress={this.close}\r\n                        light={light}\r\n                      />\r\n                    </div>\r\n                    <div className=\"gallery-content\">\r\n                      <div className=\"gallery-top\">\r\n                        <div className=\"gallery-top--inner\" />\r\n                      </div>\r\n                      <Gallery\r\n                        phrases={phrases}\r\n                        ref={this.gallery}\r\n                        photos={photos}\r\n                        {...galleryProps}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </FocusTrap>\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n\r\nReactBnbGallery.propTypes = propTypes;\r\nReactBnbGallery.defaultProps = defaultProps;\r\n\r\nexport default ReactBnbGallery;\r\n"],"names":["_typeof","DIRECTION_PREV","DIRECTION_NEXT","FORWARDS","BACKWARDS","ARROW_LEFT_KEYCODE","ARROW_RIGHT_KEYCODE","ESC_KEYCODE","THUMBNAIL_WIDTH","THUMBNAIL_HEIGHT","THUMBNAIL_OFFSET","DEFAULT_OPACITY","DEFAULT_COLOR","NORMAL_COLOR","INVERSE_COLOR","DEFAULT_Z_INDEX","defaultPhotoProps","photo","undefined","number","caption","subcaption","thumbnail","PropTypes","oneOf","shape","string","isRequired","oneOfType","arrayOf","PhotoShape","noPhotosProvided","showPhotoList","hidePhotoList","defaultPhrases","Object","keys","reduce","phrases","key","func","node","forbidExtraProps","activePhotoIndex","nonNegativeInteger","activePhotoPressed","direction","SlideDirectionShape","nextButtonPressed","prevButtonPressed","showThumbnails","bool","photos","PhotosShape","preloadSize","wrap","getPhrasePropTypes","light","noop","onLoad","onError","propTypes","show","defaultProps","LoadingSpinner","React","imagePropTypes","alt","src","style","object","className","array","imageDefaultProps","Image","props","state","loading","withError","bind","setTimeout","setState","classNames","components","push","classnames","wrapperClassNames","picture","renderImage","PureComponent","onPress","GalleryPhoto","rest","imageProps","omit","photoRendered","renderPhoto","thumbnailStyle","width","height","active","GalleryThumbnail","isOpened","GalleryTogglePhotoList","showLabel","hideLabel","label","calculateThumbnailsContainerDimension","total","calculateThumbnailsLeftScroll","current","bounding","half","thumbnailsOffset","calculatedScrollLeft","thumbnailsPerRow","thumbnailsHalf","Math","round","thumbnailsLeft","abs","GalleryCaption","thumbnailsWrapperRef","thumbnailsListRef","hasMoreThanOnePhoto","length","onThumbnailPress","setGalleryFigcaptionRef","setGalleryThubmanilsRef","toggleThumbnails","prevProps","setThumbnailsWrapperScrollLeft","event","index","parseInt","currentTarget","dataset","photoIndex","getBoundingClientRect","scrollLeft","marginLeft","element","prevState","currentPhoto","getPhotoByIndex","captionThumbnailsWrapperWidth","map","renderThumbnail","svgAttributes","viewBox","role","focusable","controlStyle","fill","controlStyleLight","arrow","disabled","GalleryControl","onButtonPress","PREV_ARROW","GalleryPrevButton","NEXT_ARROW","GalleryNextButton","galleryPropTypes","galleryDefaultProps","Gallery","hidePrevButton","hideNextButton","controlsDisabled","lastPreloadIndex","preloadedPhotos","hasPhotos","move","prev","next","onPhotoLoad","onPhotoError","onPhotoPress","onPrevButtonPress","onNextButtonPress","to","activeIndex","isNextDirection","isPrevDirection","lastItemIndex","isGoingToWrap","delta","itemIndex","nextElementIndex","getItemByDirection","wrapCheck","controls","emptyMessage","galleryModalPreloadPhotos","renderPreloadPhotos","renderControls","CLOSE_PATH","buttonStyle","display","buttonStyleLight","buttonProps","GalleryCloseButton","MIN","MAX","opacityValidation","propName","Error","processPhoto","_extends","getPhotos","leftKeyPressed","onClose","rightKeyPressed","keyboard","opacity","backgroundColor","zIndex","ReactBnbGallery","gallery","createRef","close","onKeyDown","test","target","tagName","which","preventDefault","zindex","galleryProps","modalProps","tabIndex","galleryModalOverlayStyles","getModalOverlayStyles","Portal","Component"],"mappings":"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"}